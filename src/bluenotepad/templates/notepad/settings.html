{% extends "notepad/notepad_base.html" %}

{% block tab_content %}

	<h3>Daily measurement points</h3>
	<div class="btn-group navbar">
	    <button class="btn btn-primary" onClick='showEditor()'>Add new</button>
	</div>
	
	<table class="table table-bordered table-striped">
		<tr>
			<th>#</th>
			<th>Name</th>
			<th>Events</th>
			<th>Description</th>
			<th>Modified</th>
			<th>Action</th>
		</tr>
		{% for stat in stats %}
		<tr>
			<td>{{forloop.counter}}</td>
			<td>{{stat.title}}</td>
			<td>{{stat.rules}}</td>
			<td>{{stat.created_at}}</td>
			<td>{{stat.description}}</td>
			<td>
				<button class="btn" onClick='showEditor("{{stat.key.id}}","text_{{forloop.counter}}")'>Edit</button>
				<button class="btn btn-danger" onClick='showEditor("{{stat.key.id}}","text_{{forloop.counter}}")'>Remove</button>
			</td>
		</tr>
		{% endfor %}
	</table>

	<div id="editModal" class="modal hide fade">
		<form class="modal-form" action="edit_stat_def" method="post">
			<div id="modalTitle" class="modal-header">Edit measurement point</div>
			<div class="modal-body">
				{% csrf_token %}
				<div>Title</div>
				<input type="text" id="editTitle" name="title" class="span12"/>
				<div>Monitored events</div>
				<textarea id="editRules" name="rules" class="input-block-level" rows="8"></textarea>
				<div>Description</div>
				<textarea id="editDescription" name="description" class="input-block-level" rows="4"></textarea>
			</div>
			<div class="modal-footer">
	   			<button type="submit" class="btn" data-dismiss="modal">Cancel</button>
	   			<button type="submit" class="btn btn-primary">Save</button>
			</div>
		</form>
	</div>
	
<script type="text/javascript">
	function showEditor(id, textId){
		$('#editModal').modal();
//		$("#noteID").val(id);
//		$("#noteText").val($("#"+textId).html());
//		$("#noteText").focus();
	}
	
	function showEditor(){
		$('#editModal').modal();
	}
</script>
	

{% endblock %}

